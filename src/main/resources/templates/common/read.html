<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head xmlns:th="http://www.thymeleaf.org">
<title>Common Detail</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!--===============================================================================================-->
<link rel="icon" type="image/png"
	href="../../static/images/icons/favicon.png" />
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	href="../../static/vendor/bootstrap/css/bootstrap.min.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	href="../../static/fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	href="../../static/fonts/iconic/css/material-design-iconic-font.min.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	href="../../static/fonts/linearicons-v1.0.0/icon-font.min.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	href="../../static/vendor/animate/animate.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	href="../../static/vendor/css-hamburgers/hamburgers.min.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	href="../../static/vendor/animsition/css/animsition.min.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	href="../../static/vendor/select2/select2.min.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	href="../../static/vendor/daterangepicker/daterangepicker.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	href="../../static/vendor/slick/slick.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	href="../../static/vendor/MagnificPopup/magnific-popup.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css"
	href="../../static/vendor/perfect-scrollbar/perfect-scrollbar.css">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css" href="../../static/css/util.css">
<link rel="stylesheet" type="text/css" href="../../static/css/main.css">
<!--===============================================================================================-->
</head>
<body class="animsition">
	<div th:replace="/menu :: header"></div>
	<!-- Product Detail -->
	<section class="sec-product-detail bg0 p-t-65 p-b-60">
		<div class="container">
			<div class="row">
				<div class="col-md-6 col-lg-7 p-b-30">
					<div class="p-l-25 p-r-30 p-lr-0-lg">
						<div class="wrap-slick3 flex-sb flex-w">
							<div class="slick3 gallery-lb">

								<div class="item-slick3">
									<div class="wrap-pic-w pos-relative">
										<img th:src="${common.product.image}" alt="IMG-PRODUCT">
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<div class="col-md-6 col-lg-5 p-b-30">
					<div class="p-r-50 p-t-5 p-lr-0-lg">
						<h4 class="mtext-105 cl2 js-name-detail p-b-14"
							th:text="${common.product.productName}"></h4>

						<span class="mtext-106 cl2"
							th:text="${common.product.price} + '원'"> </span>

						<p class="stext-102 cl3 p-t-23" id="dday"></p>

						<!-- 좋아요 기능!!! -->
						<div class="block2-txt-child2 flex-r p-t-3">
							<a
								th:href="@{/favorite/add(productId = ${common.product.productId}, typeId = ${common.common.commonId}, type = '3')}"
								th:if="${fav == 0}"> <img
								class="icon-heart1 dis-block trans-04"
								src="../../static/images/icons/icon-heart-01.png" alt="ICON">

							</a> <a
								th:href="@{/favorite/delete(productId = ${common.product.productId})}"
								th:if="${fav == 1}"> <img
								class="icon-heart2 dis-block trans-04"
								src="../../static/images/icons/icon-heart-02.png" alt="ICON">
							</a>
						</div>

						<!--  -->
						<div class="p-t-33">
							<div class="flex-w flex-r-m p-b-10">
								<div class="size-203 flex-c-m respon6">Status</div>

								<div class="size-204 respon6-next">
									<div class="rs1-select2 bor8 bg0">
										<p style="margin: 1em;" align='center'
											th:switch="${common.common.status}">
											<span th:case="1">Before</span> <span th:case="2">Under</span>
											<span th:case="3">Over</span> <span th:case="4">Cancel</span>
											<span th:case="5">Success</span>
										</p>
									</div>
								</div>
							</div>

							<div class="flex-w flex-r-m p-b-10">
								<div class="size-203 flex-c-m respon6">Period</div>

								<div class="size-204 respon6-next">
									<div class="rs1-select2 bor8 bg0">
										<p style="margin: 1em;" align='center'>
											<span th:text="${common.common.startDate}"></span> ~ <span
												th:text="${common.common.endDate}"></span>
										</p>
									</div>
								</div>
							</div>

							<div class="flex-w flex-r-m p-b-10">
								<div class="size-203 flex-c-m respon6">Participants</div>

								<div class="size-204 respon6-next">
									<div class="rs1-select2 bor8 bg0">
										<p style="margin: 1em;" align='center'>
											<span th:text="${common.common.participants}"></span> / <span
												th:text="${common.common.min}"></span>
										</p>
									</div>
								</div>
							</div>
							<!-- <div class="flex-w flex-r-m p-b-10"
								th:if="${common.common.status} == 2 or ${common.common.status} == 3"
								style='padding-left: 20%; margin-top: 3%'>
								<div class="size-204 flex-w flex-m respon6-next"> -->
								
								<div class="flex-w flex-r-m p-b-10"
								style='padding-left: 20%; margin-top: 3%'>
								<div class="size-204 flex-w flex-m respon6-next">
									<div class="wrap-num-product flex-w m-r-20 m-tb-10"
										style="display: none"></div>

									<button th:if="${join} == null"
										class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04 js-join-common">
										Join</button>

									<button th:if="${join != null && common.common.status != 5}"
										class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04 js-cancel-common">
										Cancel</button>

								<button th:if="${join != null && common.common.status == 5 && join.payment == 0}"
										class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04 js-pay-common">
										Pay</button>
								</div>
							</div>
						</div>

					</div>
				</div>
			</div>

			<div class="bor10 m-t-50 p-t-43 p-b-40">
				<!-- Tab01 -->
				<div class="tab01">
					<!-- Nav tabs -->
					<ul class="nav nav-tabs" role="tablist">
						<li class="nav-item p-b-10"><a class="nav-link active"
							data-toggle="tab" href="#description" role="tab">Description</a>
						</li>

						<li class="nav-item p-b-10"><a class="nav-link"
							th:if="${common.product.attribute1 != null && common.product.attribute1 != ''}"
							data-toggle="tab" href="#information" role="tab">Additional
								information</a></li>
					</ul>

					<!-- Tab panes -->
					<div class="tab-content p-t-43">
						<!-- - -->
						<div class="tab-pane fade show active" id="description"
							role="tabpanel">
							<div class="how-pos2 p-lr-15-md" align="center">
								<p class="stext-102 cl6" th:text="${common.product.content}"></p>
							</div>
						</div>

						<!-- - -->
						<div class="tab-pane fade" id="information" role="tabpanel"
							th:if="${common.product.attribute1 != null && common.product.attribute1 != ''}">
							<div class="row">
								<div class="col-sm-10 col-md-8 col-lg-6 m-lr-auto "
									align="center">
									<ul class="p-lr-28 p-lr-15-sm" style="text-align: center;">
										<li class="flex-w flex-t p-b-7"
											th:if="${common.product.attribute1 != null && common.product.attribute1 != ''}"><span
											class="stext-102 cl3 size-205"> Attribute1 </span> <span
											class="stext-102 cl6 size-206"
											th:text="${common.product.attribute1}"> </span></li>

										<li class="flex-w flex-t p-b-7"
											th:if="${common.product.attribute2 != null && common.product.attribute2 != ''}"><span
											class="stext-102 cl3 size-205"> Attribute2 </span> <span
											class="stext-102 cl6 size-206"
											th:text="${common.product.attribute2}"> </span></li>

										<li class="flex-w flex-t p-b-7"
											th:if="${common.product.attribute3 != null && common.product.attribute3 != ''}"><span
											class="stext-102 cl3 size-205"> Attribute3 </span> <span
											class="stext-102 cl6 size-206"
											th:text="${common.product.attribute3}"> </span></li>

									</ul>
								</div>
							</div>
						</div>

					</div>
				</div>
			</div>
		</div>

		<div>
			<div class="flex-w flex-c-m m-tb-10">
				<!-- th:if="${common.common.userId} == ${session.userId}" -->
				<button
					class="flex-c-m stext-106 cl6 size-105 bor4 pointer hov-btn3 trans-04 m-tb-4"
					style="margin: 3%">
					<a style="color: black;"
						th:href='@{/common/update(commonId=${common.common.commonId})}'>수정</a>
				</button>
				<button
					class="flex-c-m stext-106 cl6 size-105 bor4 pointer hov-btn3 trans-04 m-tb-4"
					style="margin: 3%">
					<a style="color: black;"
						th:href='@{/common/delete(commonId=${common.common.commonId}, productId=${common.product.productId})}'>삭제</a>
				</button>
			</div>
			<!-- 여기서 부터 알람!!  -->
			<!-- 바꿔야 할것 flag = 2로, commonId를 aucId로  -->
			<div class="flex-w flex-c-m m-tb-10" style="margin-top: -5%">
				<button
					class="flex-c-m stext-106 cl6 size-105 bor4 pointer hov-btn3 trans-04 m-tb-4"
					style="margin: 3%">
					<a style="color: black;"
						th:href='@{/alarm/create(commonId=${common.common.commonId}, flag=1)}'
						onclick="window.open(this.href, '_blank', 'width=800, height=600'); return false;">알람
						생성</a>
				</button>

				<button
					class="flex-c-m stext-106 cl6 size-105 bor4 pointer hov-btn3 trans-04 m-tb-4"
					style="margin: 3%">
					<a style="color: black;"
						th:href='@{alarm/list(commonId=${common.common.commonId}, flag=1)}'
						onclick="window.open(this.href, '_blank', 'width=800, height=600'); return false;">알람
						목록</a>
				</button>
			</div>

			<!-- 여기서까지 알람  -->
		</div>
		</div>
	</section>


	<!-- Back to top -->
	<div class="btn-back-to-top" id="myBtn">
		<span class="symbol-btn-back-to-top"> <i
			class="zmdi zmdi-chevron-up"></i>
		</span>
	</div>

	<!--===============================================================================================-->
	<script src="../../static/vendor/jquery/jquery-3.2.1.min.js"></script>
	<!--===============================================================================================-->
	<script src="../../static/vendor/animsition/js/animsition.min.js"></script>
	<!--===============================================================================================-->
	<script src="../../static/vendor/bootstrap/js/popper.js"></script>
	<script src="../../static/vendor/bootstrap/js/bootstrap.min.js"></script>
	<!--===============================================================================================-->
	<script src="../../static/vendor/select2/select2.min.js"></script>
	<script>
		$(".js-select2").each(function() {
			$(this).select2({
				minimumResultsForSearch : 20,
				dropdownParent : $(this).next('.dropDownSelect2')
			});
		})
	</script>
	<!--===============================================================================================-->
	<script src="../../static/vendor/daterangepicker/moment.min.js"></script>
	<script src="../../static/vendor/daterangepicker/daterangepicker.js"></script>
	<!--===============================================================================================-->
	<script src="../../static/vendor/slick/slick.min.js"></script>
	<script src="../../static/js/slick-custom.js"></script>
	<!--===============================================================================================-->
	<script src="../../static/vendor/parallax100/parallax100.js"></script>
	<script>
		$('.parallax100').parallax100();
	</script>
	<!--===============================================================================================-->
	<script
		src="../../static/vendor/MagnificPopup/jquery.magnific-popup.min.js"></script>
	<script>
		$('.gallery-lb').each(function() { // the containers for all your galleries
			$(this).magnificPopup({
				delegate : 'a', // the selector for gallery item
				type : 'image',
				gallery : {
					enabled : true
				},
				mainClass : 'mfp-fade'
			});
		});
	</script>
	<!--===============================================================================================-->
	<script src="../../static/vendor/isotope/isotope.pkgd.min.js"></script>
	<!--===============================================================================================-->
	<script src="../../static/vendor/sweetalert/sweetalert.min.js"></script>
	<script>
		$('.js-addwish-b2, .js-addwish-detail').on('click', function(e) {
			e.preventDefault();
		});

		$('.js-addwish-b2').each(
				function() {
					var nameProduct = $(this).parent().parent().find(
							'.js-name-b2').html();
					$(this).on('click', function() {
						swal(nameProduct, "is added to wishlist !", "success");

						$(this).addClass('js-addedwish-b2');
						$(this).off('click');
					});
				});

		$('.js-addwish-detail').each(
				function() {
					var nameProduct = $(this).parent().parent().parent().find(
							'.js-name-detail').html();

					$(this).on('click', function() {

						swal(nameProduct, "is added to wishlist !", "success");

						if (swal.close()) {
							$(this).addClass('js-addedwish-detail');
							$(this).off('click');
						}
					});
				});

		/*---------------------------------------------*/

		$('.js-join-common')
				.each(
						function() {

							var nameProduct = $(this).parent().parent()
									.parent().parent().find('.js-name-detail')
									.html();
							$(this)
									.on(
											'click',
											function() {

												swal(nameProduct,
														"is joined common !",
														"success");

												location.href = "[[@{/common/join(commonId=${common.common.commonId})}]]";

											});
						});

		$('.js-cancel-common')
				.each(
						function() {

							var nameProduct = $(this).parent().parent()
									.parent().parent().find('.js-name-detail')
									.html();
							$(this)
									.on(
											'click',
											function() {

												swal(nameProduct,
														"is canceled common !",
														"success");

												location.href = "[[@{/common/cancel(commonId=${common.common.commonId})}]]";

											});
						});

		$('.js-pay-common')
				.each(
						function() {

							var nameProduct = $(this).parent().parent()
									.parent().parent().find('.js-name-detail')
									.html();
							$(this)
									.on(
											'click',
											function() {
												var url = "[[@{/order/create(type=2, productId=${common.product.productId})}]]"
												url = url.replace("amp;", "")
												location.href = url; /* 결제 창으로 넘어가기  */

											});
						});
	</script>
	<!--===============================================================================================-->
	<script
		src="../../static/vendor/perfect-scrollbar/perfect-scrollbar.min.js"></script>
	<script>
		$('.js-pscroll').each(function() {
			$(this).css('position', 'relative');
			$(this).css('overflow', 'hidden');
			var ps = new PerfectScrollbar(this, {
				wheelSpeed : 1,
				scrollingThreshold : 1000,
				wheelPropagation : false,
			});

			$(window).on('resize', function() {
				ps.update();
			})
		});
	</script>
	<!--===============================================================================================-->
	<script src="../../static/js/main.js"></script>
</body>
</html>